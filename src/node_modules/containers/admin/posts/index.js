import React, {Component} from 'react'
import {connect} from 'react-redux'
import PostsList from './PostsList'
import PostForm from './PostForm'

class AdminPosts extends Component {

  constructor(props) {
    super(props)
    this.state = {}
  }

  editPost = (id) => {
    this.props.history.push(`/admin/posts/edit/${id}`);
  }

  newPost = () => {
    this.props.history.push(`/admin/posts/new`);
  }


  render() {
    const {location} = this.props
    const url = this.props.match.url
    return (
      <div style={{marginTop: '20px'}}>
        <Route
          path={`${this.props.match.url}/posts/list`}
          render={() => (<PostsList
              newPost={this.newPost}
              editPost={this.editPost} />
          )}
        />
        <Route
          path={`${url}/posts/edit/:id`}
          render={() => (<PostForm location={location}/>)}
        />
        <Route
          path={`${url}/posts/new`}
          render={() => (<PostForm location={location} />)}
        />
      </div>
    )
  }


}

const mapStateToProps = (state) => {
  return {
    posts: state.posts || []
  }
}

const mapDispatchToProps = {

}

export default connect(mapStateToProps, mapDispatchToProps)(AdminPosts)
